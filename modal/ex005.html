<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Galeria de imagem</title>
    <style>
        *:not(dialog){
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body{
            display: flex;
            flex-flow: column wrap;
            position: relative;
        }

        header{
            background-color: antiquewhite;
            width: 100%;
            height: 15vh;
            margin-block-end: 8px;
        }

        header h1{
            text-align: center;
            line-height: 15vh;
            font-weight: bolder;
            text-transform: capitalize;
        }

        .container{
            width: 100%;
            max-width: 90%;
            margin: 0 auto;
            columns: 300px 4;
            gap: 2px;
        }

        .container img{
            object-fit: cover;
            border-radius: 8px;
            box-shadow: 0 0 8px rgba(0 0 0 .5);
            break-inside: avoid;
        }

        dialog{
            position: fixed;
            top: 180px;
            z-index: 999;
            width: 600px;
            aspect-ratio: 16 / 9;
            border: none;
            border-radius: 12px;
        }

        dialog button{
            border: none;
            border-radius: 12px;
            outline: none;
            padding: 12px 18px;
            background-color: #7e1515;
            color: #fff;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <header>
        <h1>Galeria de imagens dinamicas</h1>
    </header>

    <section class="container"></section>

    <dialog open>
        <img class="imgModal" src="" alt="Imagem em destaque">
        <button type="button">Fechar Imagem</button>
    </dialog>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const galleryContainer = document.querySelector('.container');
            const modalContainer = document.querySelector('dialog');
            const imgModal = document.querySelector('.imgModal');
            const btnClose = document.querySelector('button');
            const numberOfImages = 20;

            for(let a = 0; a < numberOfImages; a++){
                const imageId = Math.floor(Math.random() * 1000) + 1;

                const width = 300;
                const height = Math.floor(Math.random() * (450 - 250 + 1)) + 250;

                const imageUrl = `https://picsum.photos/id/${imageId}/${width}/${height}`;

                const imgElement = document.createElement('img');

                imgElement.src = imageUrl;
                imgElement.alt = `Imagem aleatÃ³ria ${a + 1}`;



                imgElement.onload = () => {
                    console.log(`Imagem ${i+1} carregada: ${imageUrl}`);
                };
                imgElement.onerror = () => {
                console.error(`Erro ao carregar a imagem: ${imageUrl}`);
                };
                galleryContainer.appendChild(imgElement);

                btnClose.onclick = function(){
                    modalContainer.close();
                }

                modalContainer.onclick

                imgElement.addEventListener('click', () => {
                    imgModal.src = imageUrl;
                    imgModal.showModal();
                });
            }
        })
    </script>
</body>
</html>